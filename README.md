# 정부24 자동 로그인 (`govkr.py`)

이 프로젝트는 **정부24(Gov.kr)** 사이트에 자동으로 로그인할 수 있도록 도와주는 Python 코드입니다. 공동인증서를 이용하여 로그인하고, 사용자 정보를 가져올 수 있습니다.

추신. 로그인 구현이 끝난 후 아이디 / 비밀번호 로그인으로도 작업이 가능함을 알게 되어 후회중입니다.

## 📌 주요 기능

- **공동인증서 기반 로그인**
- **정부24 로그인 세션 개설**

## 🛠️ 설치 방법

이 프로젝트를 사용하려면 필요한 패키지를 설치해야 합니다.

```bash
pip install -r requirements.txt
```

## 🚀 사용 방법

1. **공동인증서 준비**

   - `signCert.der` (서명용 공개 인증서)
   - `signPri.key` (서명용 개인키)
   - `svr_cert.der` (서버측 암호화 인증서, 미기입 시 자동 수집)

2. **로그인 실행**

   ```bash
   python govkr.py
   ```

3. **인증서 비밀번호 입력**

   - 실행 후, 인증서 비밀번호를 입력하면 자동으로 로그인 시도

4. **로그인 성공 시 사용자 이름 출력**

   ```text
   사용자 이름: var userNm = "홍길동";
   ```

## ✨ 상세 구현 과정

1. **로그인시 요구 데이터 확인**
   - 공동인증서 로그인 요청 시, 서버는 서명 정보(xml, pkcs1Msg)와 vidMsg 두 개의 주요 데이터를 요구합니다.
   - 클라이언트는 위에서 생성한 서명 및 vidMsg를 포함한 데이터를 POST 방식으로 전송합니다.
   - AnySign과의 웹소켓 통신을 통해 제공받는 vidMsg에 대한 구현이 핵심적입니다.

1. **서명 생성**
   - 서명용 인증서와 개인키를 사용하여 고정 데이터에 대해 PKCS#7 서명을 생성합니다.
   - 생성된 서명은 16진수 문자열로 변환되어 로그인 요청 데이터에 포함됩니다.

2. **고유 난수 값(random_num) 추출**
   - 개인키를 로드하는 과정에서, DER 디코딩을 통해 내부 구조에 포함된 고유 난수 값(random_num)이 추출됩니다.
   - vid 메시지 생성 시, ASN.1 DER 인코딩을 통해 빈 문자열과 함께 BIT STRING 형식으로 포함되어, 메시지의 무결성과 유일성을 보장합니다.

3. **vid 메시지 생성**
   - ASN.1 DER 구조를 이용해 빈 문자열과 앞서 생성된 random_num을 포함하는 메시지 구조를 생성합니다.
   - 생성된 구조는 SEED/CBC 로 대칭키 암호화를 수행하여 암호문을 생성합니다.
   - 대칭키는 서버 측 인증서의 공개키(RSAES-PKCS1-V1_5)를 이용해 암호화되며, 두 암호문의 결합 후 16진수 문자열로 변환되어 전송됩니다.

## ⚠️ 주의 사항

- 본 스크립트는 **학술적 연구 및 개인 학습 목적으로 제작**되었으며 **학술적 연구 및 개인 학습 목적으로만 사용**해야 합니다.
- **상업적 용도로의 사용은 엄격히 금지**됩니다.  
- 본 스크립트는 특정 서비스의 정책 변경에 따라 정상적으로 동작하지 않을 수 있습니다.
- 무단 사용 및 부적절한 활용으로 인해 발생하는 문제에 대해 제작자는 책임지지 않습니다.
